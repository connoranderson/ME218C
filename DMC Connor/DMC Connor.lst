MPASM  5.39                    DMC CONNOR.ASM   5-21-2016  2:34:32         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001         errorlevel -302
                      00002         errorlevel -305
                      00003         list    p=PIC12F752
                      00004 #include "p12F752.inc"
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ;  MPASM PIC12F752 processor include
                      00005 ; 
                      00006 ;  (c) Copyright 1999-2010 Microchip Technology, All rights reserved
                      00007 ;==========================================================================
                      00008 
                      00647         LIST
                      00005 
                      00006 ;
                      00007 ;               Code Protection OFF     (_CP_OFF)
                      00008 ;               Watchdog Timer OFF      (_WDTE_OFF)
                      00009 ;               Power Up Timer Enable ON        (_PWRTE_ON) WAITS TO RUN YOUR CODE TILL TIMER IS STABLE
                      00010 ;               MCLR Control OFF        (_MCLRE_OFF)
                      00011 ;               Oscillator Type INT     (_FOSC0_INT)
                      00012 ;               Write Project OFF       (_WRT_OFF)
2007   3FE6           00013                 __config(_CP_OFF & _WDT_OFF & _PWRTE_ON & _FOSC_INT)
                      00014         ;__config (_CP_OFF & _WDTE_OFF & _PWRTE_ON & _MCLRE_OFF & _FOSC0_INT & _WRT_OFF)
                      00015        
                      00016 ;       
                      00017 ;               variable definitions
                      00018 ;
                      00019         
                      00020 ;Binary conventions
  00000000            00021 WAITING                                         equ             0
  00000001            00022 RECEIVING                                       equ             1
  00000001            00023 STEP                                            equ             1
  00000000            00024 OFF                                                     equ             0
  00000001            00025 ON                                                      equ             1
                      00026 
                      00027 ;Pins
  00000000            00028 LINE_IN                                         equ             RA0
  00000001            00029 RED_LED                                         equ             LATA1
  00000002            00030 BLUE_LED                                        equ             LATA2
  00000004            00031 STEPPER_DIR                                     equ             LATA4
  00000005            00032 STEPPER_EN                                      equ             LATA5
                      00033 
                      00034 ;Variables
  00000070            00035 PACKET                                          equ             0x70
  00000071            00036 MOTOR_STATE                                     equ             0x71
  00000072            00037 LED_STATE                                       equ             0x72
  00000073            00038 BITS_LEFT                                       equ             0x73
  00000074            00039 COUNTS_LEFT                                     equ             0x74
                      00040 
  00000075            00041 WREG_TEMP                                       equ     0x75
  00000076            00042 STATUS_TEMP                             equ     0x76
  00000077            00043 PCLATH_TEMP                             equ     0x77
                      00044 
MPASM  5.39                    DMC CONNOR.ASM   5-21-2016  2:34:32         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  00000078            00045 PACKET_COPY                                     equ             0x78
  00000079            00046 IS_PAIRED                                       equ             0x79
  0000007A            00047 COLOR                                           equ             0x7A
  0000007B            00048 LED_ON                                          equ             0x7B
  0000007C            00049 LED_Timeval                                     equ             0x7C
  0000007D            00050 LED_Counter                                     equ             0x7D
  0000007E            00051 LED_Lowerval                            equ             0x7E
  0000007F            00052 LED_Upperval                            equ             0x7F
                      00053 
                      00054 
                      00055 ;Constants
  00000003            00056 BITS_IN_PACKET                          equ             0x3     
  0000005A            00057 MAX_COUNTS                                      equ             0x5A
                      00058 
                      00059 
0000                  00060                                                                 org             0
0000   2833           00061                                                                 goto    Main
0004                  00062                                                                 org     4
0004   2875           00063                                                                 goto    ISR
0005                  00064                                                                 org             5
                      00065 
                      00066 ;
                      00067 ; Listing of LED Dimming Array
                      00068 ;
0005                  00069 DIM_LED_ARRAY:
0005   0782           00070     addwf PCL, f
0006   3400           00071     RETLW 0x00
0007   342F           00072     RETLW 0x2F
0008   344A           00073     RETLW 0x4A
0009   345D           00074     RETLW 0x5D
000A   346C           00075     RETLW 0x6C
000B   3479           00076     RETLW 0x79
000C   3483           00077     RETLW 0x83
000D   348C           00078     RETLW 0x8C
000E   3494           00079     RETLW 0x94
000F   349B           00080     RETLW 0x9B
0010   34A1           00081     RETLW 0xA1
0011   34A7           00082     RETLW 0xA7
0012   34AD           00083     RETLW 0xAD
0013   34B2           00084     RETLW 0xB2
0014   34B6           00085     RETLW 0xB6
0015   34BB           00086     RETLW 0xBB
0016   34BF           00087     RETLW 0xBF
0017   34C3           00088     RETLW 0xC3
0018   34C6           00089     RETLW 0xC6
0019   34CA           00090     RETLW 0xCA
001A   34CD           00091     RETLW 0xCD
001B   34D0           00092     RETLW 0xD0
001C   34D3           00093     RETLW 0xD3
001D   34D6           00094     RETLW 0xD6
001E   34D9           00095     RETLW 0xD9
001F   34DB           00096     RETLW 0xDB
0020   34DE           00097     RETLW 0xDE
MPASM  5.39                    DMC CONNOR.ASM   5-21-2016  2:34:32         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0021   34E0           00098     RETLW 0xE0
0022   34E3           00099     RETLW 0xE3
0023   34E5           00100     RETLW 0xE5
0024   34E7           00101     RETLW 0xE7
0025   34E9           00102     RETLW 0xE9
0026   34EB           00103     RETLW 0xEB
0027   34ED           00104     RETLW 0xED
0028   34EF           00105     RETLW 0xEF
0029   34F1           00106     RETLW 0xF1
002A   34F3           00107     RETLW 0xF3
002B   34F5           00108     RETLW 0xF5
002C   34F6           00109     RETLW 0xF6
002D   34F8           00110     RETLW 0xF8
002E   34FA           00111     RETLW 0xFA
002F   34FB           00112     RETLW 0xFB
0030   34FD           00113     RETLW 0xFD
0031   34FE           00114     RETLW 0xFE
0032   34FF           00115     RETLW 0xFF
                      00116 
                      00117 
0033                  00118 Main:
                      00119 
                      00120 ;Initialize ANSEL register
0033   1683 1703      00121         banksel ANSELA
0035   1005           00122         BCF ANSELA, ANSA0
0036   1085           00123         BCF ANSELA, ANSA1
0037   1105           00124         BCF ANSELA, ANSA2
0038   1205           00125         BCF ANSELA, ANSA4
0039   1285           00126         BCF ANSELA, ANSA5
                      00127 
                      00128 ; Initialize pins 
                      00129 ; RA1, RA2, RA4, and RA5 --> Outputs
                      00130 ; RA0 --> Input
003A   1283 1703      00131         banksel LATA
003C   1085           00132         bcf LATA, LATA1
003D   1105           00133         bcf LATA, LATA2
003E   1205           00134         bcf LATA, LATA4
003F   1285           00135         bcf LATA, LATA5
0040   1683 1303      00136         banksel TRISA
0042   1085           00137         BCF TRISA, TRISA1
0043   1105           00138         BCF TRISA, TRISA2
0044   1205           00139         BCF TRISA, TRISA4
0045   1285           00140         BCF TRISA, TRISA5
                      00141 
                      00142 
                      00143 ;Set up timer 0 with 2x prescaler (Bit value = 000)
0046   1683 1303      00144         banksel OPTION_REG
0048   1281           00145         BCF OPTION_REG, T0CS
0049   1181           00146         BCF OPTION_REG, PSA
004A   1001           00147         BCF OPTION_REG, PS0
004B   1081           00148         BCF OPTION_REG, PS1
004C   1101           00149         BCF OPTION_REG, PS2
                      00150 
MPASM  5.39                    DMC CONNOR.ASM   5-21-2016  2:34:32         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00151 ; Set up timer 1 for the stepper + LEDs
004D   1283 1303      00152     banksel T1CON
004F   1391           00153     BCF T1CON, TMR1CS1 ; Set the source to instruction clock
0050   1311           00154     BCF T1CON, TMR1CS0 
0051   1691           00155     BSF T1CON, T1CKPS1 ; Set the prescaler to 4. 
0052   1211           00156     BCF T1CON, T1CKPS0 ; For 8, change BCF to BSF
0053   1392           00157     BCF T1GCON, TMR1GE ; Disable the gate control
                      00158 
                      00159 ;########## PWM ##########
                      00160 ;   Set up timer 2 for the communication protocol
                      00161 ;    movlw       0xFA        ; Move 0xFA the working register 250 to reach 1ms
                      00162 ;    banksel     PR2     ; Select the bank with PR2
                      00163 ;    movwf       PR2     ; Move 0xFA to PR2 so that the timer counts through 250 (not including pre or p
                            ost scalers)
                      00164                     ; Leave the default T2CON register to have a 1:1 postscaler and 1:1 prescaler with t
                            he timer off
                      00165 
                      00166 ;       Setting up timer 2
0054   30FF           00167         movlw           0xFF                    ; Move 0xFF to the working register
0055   1283 1703      00168         banksel         PR2                             ; Select the bank with PR2
0057   0091           00169         movwf           PR2                             ; Move 0xFF to PR2 so that the timer counts thro
                            ugh 255 (not including pre or post scalers)
                      00170 ;       movlw           0x07                    ; Move 0x07 to the working register
0058   1283 1703      00171         banksel         T2CON                   ; Select the bank with the t2con register
                      00172 ;       movwf           T2CON                   ; Move 0x07 into the T2CON register to have a 1:1 postsc
                            aler and 1:16 prescaler
005A   1592           00173         BSF                     T2CON, 3
005B   1612           00174         BSF                     T2CON, 4
005C   1692           00175         BSF                     T2CON, 5
005D   1712           00176         BSF                     T2CON, 6
                      00177 ;       BSF                     T2CON, 1
                      00178 ;       banksel         PIR1
                      00179 ;       bcf                     PIR1, TMR2IF    ; 
                      00180 ;       banksel         PIE1                    ; Select the bank with the PIE1 register
                      00181 ;       bsf             PIE1, TMR2IE    ; Enable the timer 2 interrupt 
                      00182 
                      00183 ; Initialize the variables
005E   3003           00184         movlw           BITS_IN_PACKET
005F   00F3           00185         movwf           BITS_LEFT
0060   305A           00186         movlw           MAX_COUNTS
0061   00F4           00187         movwf           COUNTS_LEFT
0062   3000           00188         movlw           0x00
0063   00F9           00189         movwf           IS_PAIRED
0064   00FB           00190         movwf           LED_ON
                      00191 
                      00192 ;       Set up the interrupt on rising edge on RA0
0065   1283 1303      00193         banksel         INTCON          ; Select the bank with the intcon register
0067   158B           00194         bsf             INTCON, GPIE    ; Enable the interrupt on change interrupts
0068   1283 1303      00195         banksel         IOCAF
006A   1008           00196         bcf             IOCAF, IOCAF0
006B   1683 1303      00197         banksel         IOCAP           ; Select the bank with the IOCAP register
006D   1408           00198         bsf             IOCAP, IOCAP0   ; Enable the interrupt on positive edge
                      00199 
MPASM  5.39                    DMC CONNOR.ASM   5-21-2016  2:34:32         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00200 ; Enable External Interrupts
006E   1283 1303      00201         banksel INTCON
0070   170B           00202         bsf INTCON, PEIE
                      00203 
                      00204 ; Enable global interrupts
0071   1283 1303      00205         banksel INTCON
0073   178B           00206         bsf INTCON, GIE 
                      00207 
0074   2874           00208         goto $ ;Stay here after execution is done
                      00209 
                      00210         ;######         END OF MAIN             #######
                      00211 
                      00212 
                      00213 ;       Interrupt Response Routine
0075                  00214 ISR:
0075   00F5           00215 PUSH    movwf   WREG_TEMP       ; save WREG
0076   0803           00216                 movf    STATUS,W        ; store STATUS in WREG
0077   0183           00217                 clrf    STATUS          ; change file register to bank 0
0078   00F6           00218                 movwf   STATUS_TEMP     ; save STATUS value
0079   080A           00219                 movf    PCLATH,W        ; store PCLATH in WREG
007A   00F7           00220                 movwf   PCLATH_TEMP     ; save PCLATH value
007B   018A           00221                 clrf    PCLATH          ; change to program memory page 0
                      00222 
007C                  00223 ISR_BODY:
                      00224         ; Check source of interrupt
                      00225 
007C                  00226 TIMER2_CHECK:
007C   1283 1303      00227                 banksel         PIR1                    ; Select the bank with the PIR1 register
007E   188C           00228                 btfsc           PIR1, TMR2IF    ; Check to see if Timer 2 caused the interrupt, skip if 
                            not
007F   2962           00229                 GOTO            PWM     ; Go to PWM
                      00230 
0080   1283 1303      00231                 banksel IOCAF   ;Interrupt on rising edge
0082   1808           00232                 btfsc IOCAF, IOCAF0             ; If Interrupt was from Start bit (Edge)
0083   208F           00233                 call START_BIT; Call start bit response routine
                      00234 
                      00235 
0084   1283 1303      00236                 banksel INTCON
0086   1E8B           00237                 btfss   INTCON, TMR0IE  ;Skip the timer 0 check if its interrupt is disabled.
0087   288A           00238                 goto    TIMER1_CHECK
                      00239         
0088   190B           00240                 btfsc INTCON, TMR0IF            ; If Interrupt was from comms timer.
0089   20AF           00241                 call RECEIVE; Call timer 0 response routine
                      00242 
008A                  00243 TIMER1_CHECK:   
008A   1283 1303      00244                 banksel         PIR1            ; Select the bank with the PIR1 register
008C   180C           00245                 btfsc           PIR1, TMR1IF    ; Check to see if Timer 1 caused the interrupt, skip if 
                            not
008D   2109           00246                 call            TIMER1_INTERRUPTSOURCE  ; Go to LED_TIMEOUT
                      00247                 
008E   2987           00248                 GOTO POP
                      00249 
                      00250 ;This is the waiting mode of the receive SM.
MPASM  5.39                    DMC CONNOR.ASM   5-21-2016  2:34:32         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

008F                  00251 START_BIT:
                      00252 
                      00253         ;Set up TMR0 for half the bit period.
008F   1683 1303      00254         banksel OPTION_REG
0091   1281           00255         BCF OPTION_REG, T0CS
0092   1181           00256         BCF OPTION_REG, PSA
0093   1001           00257         BCF OPTION_REG, PS0
0094   1081           00258         BCF OPTION_REG, PS1
0095   1101           00259         BCF OPTION_REG, PS2
0096   30D2           00260         movlw                   0xD2    ;Half bit period away from rollover
0097   1283 1303      00261         banksel                 TMR0
0099   0081           00262         movwf                   TMR0
                      00263         
009A   1283 1303      00264         banksel         IOCAF
                      00265         ; Clear and disable the RA0 rising edge interrupt
009C   1008           00266         bcf IOCAF, IOCAF0
009D   1683 1303      00267         banksel         IOCAP
009F   1008           00268         bcf IOCAP, IOCAP0
00A0   1283 1303      00269         banksel INTCON
00A2   100B           00270         bcf INTCON, RAIF ;Clear the RA change interrupt flag in INTCON
00A3   118B           00271         bcf INTCON, GPIE ;Disable the RA change int.
                      00272         
                      00273         ;Shift the variable 1 left and read the pin.
00A4   1283 1303      00274         banksel         PORTA
00A6   0DF0           00275         rlf                     PACKET
00A7   1070           00276         bcf                     PACKET, 0
00A8   1805           00277         btfsc           PORTA, LINE_IN
00A9   1470           00278         bsf                     PACKET, 0
                      00279         
                      00280         ;Unmask the timer 0 interrupt.
00AA   1283 1303      00281         banksel         INTCON
00AC   110B           00282         bcf                     INTCON,TMR0IF
00AD   168B           00283         bsf                     INTCON,TMR0IE 
                      00284 
                      00285         ;TEST pulse bit2 hi for one cycle
                      00286         ;banksel                LATA
                      00287         ;BSF                    LATA, LATA2
                      00288         ;bcf                    LATA, LATA2
                      00289         
00AE   0008           00290         RETURN
                      00291 
                      00292 ;This deals with filling up the xceive variable.
00AF                  00293 RECEIVE:
                      00294         
                      00295         ;Shift the variable 1 left and read the pin.
00AF   1283 1303      00296         banksel         PORTA
00B1   0DF0           00297         rlf                     PACKET
00B2   1070           00298         bcf                     PACKET, 0
00B3   1805           00299         btfsc           PORTA, LINE_IN
00B4   1470           00300         bsf                     PACKET, 0
                      00301         
                      00302         ;Set up TMR0 for the bit period.
00B5   1683 1303      00303         banksel OPTION_REG
MPASM  5.39                    DMC CONNOR.ASM   5-21-2016  2:34:32         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00B7   1281           00304         BCF OPTION_REG, T0CS
00B8   1181           00305         BCF OPTION_REG, PSA
00B9   1001           00306         BCF OPTION_REG, PS0
00BA   1081           00307         BCF OPTION_REG, PS1
00BB   1101           00308         BCF OPTION_REG, PS2
00BC   3099           00309         movlw                   0x99    ;Full bit period away from rollover.
00BD   1283 1303      00310         banksel                 TMR0
00BF   0081           00311         movwf                   TMR0
                      00312         
                      00313         ;Clear the timer 0 interrupt
00C0   1283 1303      00314         banksel         INTCON
00C2   110B           00315         bcf                     INTCON,TMR0IF
00C3   168B           00316         bsf                     INTCON,TMR0IE
                      00317 
                      00318 ;       ;TEST PULSE LATA2 for 2 cycles
                      00319         ;banksel LATA
                      00320         ;bsf            LATA, LATA2
                      00321         ;NOP
                      00322         ;bcf            LATA, LATA2
                      00323 
                      00324         ;Decrement bits left counter, skip if zero
00C4   0BF3           00325         DECFSZ          BITS_LEFT
00C5   0008           00326         RETURN
00C6   28C7           00327         goto            LAST_BIT_READ
                      00328 
                      00329 ;This part of the code interprets the transmission and takes actions based on it.
00C7                  00330 LAST_BIT_READ:
                      00331 
                      00332 ;Disable timer 0 interrupt
00C7   1283 1303      00333         banksel         INTCON
00C9   128B           00334         bcf                     INTCON,TMR0IE
                      00335 
                      00336 ;Reset transmission counter.
00CA   3003           00337         MOVLW           BITS_IN_PACKET
00CB   00F3           00338         MOVWF           BITS_LEFT
                      00339 
                      00340 ; Reenable the rising edge interrupt
                      00341 ;       Set up the interrupt on rising edge on RA0
00CC   1283 1303      00342         banksel         INTCON          ; Select the bank with the intcon register
00CE   158B           00343         bsf             INTCON, GPIE    ; Enable the interrupt on change interrupts
00CF   1283 1303      00344         banksel         IOCAF
00D1   1008           00345         bcf             IOCAF, IOCAF0
00D2   1683 1303      00346         banksel         IOCAP           ; Select the bank with the IOCAP register
00D4   1408           00347         bsf             IOCAP, IOCAP0   ; Enable the interrupt on positive edge
                      00348         
                      00349         ;Check whether the status has changed.
00D5   0870           00350         movf    PACKET, W
00D6   00F8           00351         movwf   PACKET_COPY
00D7   0CF8           00352         RRF             PACKET_COPY
00D8   0878           00353         movf    PACKET_COPY, W
00D9   3901           00354         andlw   0x01
00DA   0279           00355         SUBWF   IS_PAIRED, W
00DB   1D03           00356         BTFSS   STATUS, Z ;If the things are the same, don't change anything
MPASM  5.39                    DMC CONNOR.ASM   5-21-2016  2:34:32         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00DC   20E5           00357         CALL    START_MOVING
                      00358 ;       BTFSC   PACKET, 1;The pair bit
                      00359 ;       BSF             LATA, LATA4
                      00360 
                      00361         ;Set the LED color variable accordingly.
00DD   01FA           00362         CLRF    COLOR
00DE   0870           00363         movf    PACKET, W
00DF   3901           00364         ANDLW   0x01
00E0   1D03           00365         BTFSS   STATUS, Z
00E1   147A           00366         BSF             COLOR, 0
                      00367 
                      00368         ;If not paired, turn off the LEDs and make sure the timer is off.
00E2   1879           00369         BTFSC   IS_PAIRED, 0
00E3   0008           00370         RETURN
                      00371 
                      00372 
                      00373 
                      00374         ;Turning the LEDS off,  stopping the timer.
                      00375         ;banksel LATA
                      00376         ;BCF            LATA, RED_LED
                      00377         ;BCF            LATA, BLUE_LED
                      00378         ;banksel T2CON
                      00379         ;BCF            T2CON, TMR2ON
                      00380         ;banksel        PIE
                      00381         ;BCF            PIE, TMR2IE
                      00382         ;banksel        PIR
                      00383         ;BCF            PIR, TMR2IF
                      00384         ;CALL           TURN_LEDS_OFF
00E4   0008           00385         RETURN
                      00386         
00E5                  00387 START_MOVING:
                      00388                 ;First update the pairing status.
00E5   0879           00389                 movf            IS_PAIRED, W
00E6   3A01           00390                 xorlw           0x01
00E7   00F9           00391                 movwf           IS_PAIRED
                      00392 
                      00393                 ;Then determine which way to go.
00E8   1283 1703      00394                 banksel         LATA
00EA   1879           00395                 BTFSC           IS_PAIRED, 0
00EB   1605           00396                 BSF                     LATA, STEPPER_DIR       
00EC   1C79           00397                 BTFSS           IS_PAIRED, 0
00ED   1205           00398                 BCF                     LATA, STEPPER_DIR
                      00399 
                      00400                 ;If the motor is already moving, queue the event to be performed once it's done.
                      00401                 ;BTFSC          MOTOR_STATE, 0
                      00402                 
                      00403                 ;Change the motor status to moving.
00EE   1471           00404                 BSF                     MOTOR_STATE, 0
                      00405                 
                      00406                 ; Set up timer 1 with the required motor motion time
00EF   1283 1303      00407                 banksel         T1CON           ; Select the bank with the T1CON register
00F1   1011           00408                 bcf             T1CON, TMR1ON   ; Turn timer 1 off
00F2   1391           00409                 BCF T1CON, TMR1CS1 ; Set the source to instruction clock
MPASM  5.39                    DMC CONNOR.ASM   5-21-2016  2:34:32         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00F3   1311           00410                 BCF T1CON, TMR1CS0 
00F4   1691           00411                 BSF T1CON, T1CKPS1 ; Set the prescaler to 4
00F5   1211           00412                 BCF T1CON, T1CKPS0 
00F6   1392           00413                 BCF T1GCON, TMR1GE ; Disable the gate control
                      00414 
                      00415 ;               ;Check if the motor was moving.
                      00416 ;               BTFSC           STEPPER_EN, 0
                      00417 ;               GOTO            MID_STEP                
                      00418 
                      00419 ;When not currently stepping, set the default timer value.
                      00420 ;NOT_MID_STEP:
00F7   1283 1303      00421                 banksel TMR1L ; First set the TMR1 value to 0
00F9   3000           00422                 MOVLW   0x00
00FA   008F           00423                 MOVWF   TMR1L
00FB   0090           00424                 MOVWF   TMR1H
                      00425 ;               GOTO    T1_ENABLE_INTERRUPT
                      00426 
                      00427 ;If direction is changed mid-step, the timer must be set shorter not to overrun the mechanism.
                      00428 ;Do a crappy two's complement. Not really tested for robustness.
                      00429 ;MID_STEP:
                      00430 ;               banksel TMR1L
                      00431 ;               movlw   0xFF
                      00432 ;               subwf   TMR1H, F
                      00433 ;               subwf   TMR1L, F
                      00434                 
00FC                  00435 T1_ENABLE_INTERRUPT:
00FC   1683 1303      00436                 banksel PIE1 ; Prepare to start timer 1
00FE   140C           00437                 BSF PIE1, TMR1IE ; Set the timer 1 interrupt enable
00FF   1283 1303      00438                 banksel T1CON
0101   1411           00439                 BSF T1CON, TMR1ON ; Turn on timer 1
0102   1283 1303      00440                 banksel PIR1 ; Then clear the T1 interrupt flag
0104   100C           00441                 BCF PIR1, TMR1IF
                      00442                 
                      00443                 ;Activate the motor.
0105   1283 1703      00444                 banksel LATA
0107   1685           00445                 BSF LATA, STEPPER_EN
0108   0008           00446                 RETURN
                      00447 
0109                  00448 TIMER1_INTERRUPTSOURCE:
                      00449                 ;       Disable timer 1
                      00450                 ;banksel                T1CON           ; Select the bank with the T1CON register
                      00451                 ;bcf            T1CON, TMR1ON   ; Turn timer 1 off
0109   1283 1303      00452                 banksel         PIR1            ; Select the bank with the PIR1 register
010B   100C           00453                 bcf             PIR1, TMR1IF    ; Clear the Timer 1 interrupt flag
                      00454                 ;banksel                PIE1            ; Select the bank with the INTCON register
                      00455                 ;bcf            PIE1, TMR1IE    ; Disable the timer 1 interrupt
                      00456 
                      00457         ;banksel LATA
                      00458         ;bsf LATA, BLUE_LED
                      00459 
                      00460                 ;Determine timer 1 interrup source. Motor vs. LEDs
010C   1871           00461                 btfsc MOTOR_STATE, 0 ;If MOTOR_STATE is set (Info is on bit 0)
010D   2110           00462                 CALL STOP_MOVING ;Stop moving. Make sure it doesnt return back here
MPASM  5.39                    DMC CONNOR.ASM   5-21-2016  2:34:32         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

010E   2138           00463                 CALL DIM_LEDS ;Timer 1 interrupt was to turn off LEDs
010F   0008           00464                 RETURN
                      00465 
0110                  00466 STOP_MOVING:
0110   1283 1303      00467                 banksel         T1CON           ; Select the bank with the T1CON register
0112   1011           00468                 bcf             T1CON, TMR1ON   ; Turn timer 1 off
0113   1283 1703      00469                 banksel LATA
0115   1285           00470                 BCF LATA, STEPPER_EN ;Clear bit 0 in stepper enable
0116   1071           00471                 BCF MOTOR_STATE,0 ;Set motor state to not moving
0117   1879           00472                 BTFSC   IS_PAIRED, 0 ; Only turn on LEDs if paired
0118   211C           00473                 CALL TURN_LEDS_ON
0119   1C79           00474                 BTFSS   IS_PAIRED, 0
011A   213E           00475                 CALL    TURN_LEDS_OFF
011B   0008           00476                 RETURN
                      00477 
                      00478 ;Turns on the appropriate color of the LEDs and changes TMR1 config.
011C                  00479 TURN_LEDS_ON:
                      00480                 ;TEST CODE. DISABLE THE INTERRUPTS FOR NOW
                      00481                 ;banksel                PIE1            ; Select the bank with the INTCON register
                      00482                 ;bcf            PIE1, TMR1IE    ; Disable the timer 1 interrupt
                      00483 
                      00484                 ; Set up timer 1 with the required LED update time
011C   1283 1303      00485                 banksel         T1CON           ; Select the bank with the T1CON register
011E   1011           00486                 bcf             T1CON, TMR1ON   ; Turn timer 1 off
011F   1391           00487                 BCF T1CON, TMR1CS1 ; Set the source to instruction clock
0120   1311           00488                 BCF T1CON, TMR1CS0 
0121   1291           00489                 BCF T1CON, T1CKPS1 ; Set the prescaler to 2
0122   1611           00490                 BSF T1CON, T1CKPS0 
0123   1392           00491                 BCF T1GCON, TMR1GE ; Disable the gate control
0124   1411           00492                 BSF     T1CON, TMR1ON   ;Reenable the timer
                      00493                 ;Set the counter to 45
0125   305A           00494                 MOVLW           MAX_COUNTS
0126   00F4           00495                 MOVWF           COUNTS_LEFT
                      00496 
                      00497                 ;Set up the LEDs
0127   300C           00498                 MOVLW           0x0C
0128   00FC           00499                 MOVWF           LED_Timeval
0129   00FD           00500                 MOVWF           LED_Counter
                      00501 
                      00502         ;               ;Transfer the color into the PWM color field
                      00503         ;               BCF                     PWM_COLOR, 0
                      00504         ;               BTFSC           COLOR, 0
                      00505         ;               BSF                     PWM_COLOR, 0
                      00506                 ;Turn on the LED PWM by setting the timer load to 255, clearing the interrupt, enabling 
                            it and turning the timer on.
012A   1283 1703      00507                 banksel TMR2
012C   30FF           00508                 MOVLW   0xFF
012D   0090           00509                 MOVWF   TMR2
012E   1283 1303      00510                 banksel PIR1
0130   108C           00511                 BCF             PIR1, TMR2IF
0131   1683 1303      00512                 banksel PIE1
0133   148C           00513                 BSF             PIE1, TMR2IE
0134   1283 1703      00514                 banksel T2CON
MPASM  5.39                    DMC CONNOR.ASM   5-21-2016  2:34:32         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0136   1512           00515                 BSF             T2CON, TMR2ON
                      00516                 ;banksel LATA
                      00517                 ;BSF            LATA, LATA2
0137   0008           00518                 RETURN
                      00519 
                      00520 ;This dims the LEDs
0138                  00521 DIM_LEDS:
0138   2158           00522                 CALL LED_ON_MAX
0139   0BFD           00523                 DECFSZ LED_Counter
013A   293C           00524                 GOTO CONTINUE_LEDS
013B   2150           00525                 CALL RESET_TIME
                      00526 
013C                  00527 CONTINUE_LEDS:          
                      00528                                                                         ;decrement the counter
                      00529                 ;If the counter is 0, turn the LEDs off
013C   0BF4           00530                 DECFSZ          COUNTS_LEFT, F
013D   0008           00531                 RETURN
                      00532 
013E                  00533 TURN_LEDS_OFF:
                      00534                 ;Turn off the PWM
013E   1283 1703      00535                 banksel LATA
0140   1105           00536                 BCF             LATA, BLUE_LED
0141   1085           00537                 BCF             LATA, RED_LED
                      00538                 ;Turn off timer 1 and disable its interrupt
0142   100C           00539                 BCF PIE1, TMR1IE ; Clear the timer 1 interrupt enable
0143   1283 1303      00540                 banksel T1CON
0145   1011           00541                 BCF T1CON, TMR1ON ; Turn off timer 1
                      00542 
                      00543                 ;Turn off the PWM timer, disable its interrupt and clear its flag
0146   1283 1703      00544                 banksel T2CON
0148   1112           00545                 BCF             T2CON, TMR2ON
0149   1683 1303      00546                 banksel PIE1
014B   108C           00547                 BCF             PIE1, TMR2IE
014C   1283 1303      00548                 banksel PIR1
014E   108C           00549                 BCF             PIR1, TMR2IF
                      00550 
014F   0008           00551                 RETURN
                      00552 
0150                  00553 RESET_TIME:
0150   0BFC           00554                 decfsz LED_Timeval
0151   2954           00555                 GOTO CONTINUE_RESET
0152   0AFC           00556                 incf    LED_Timeval
0153   0AFC           00557                 incf    LED_Timeval
0154                  00558 CONTINUE_RESET:
0154   087C           00559                 movf LED_Timeval, W
0155   00FD           00560                 movwf LED_Counter
0156   215D           00561                 Call LED_ON_MIN
0157   0008           00562                 RETURN
                      00563 
0158                  00564 LED_ON_MAX:
0158   3001           00565                 movlw 0x01
0159   00FE           00566                 movwf LED_Lowerval
015A   30FF           00567                 movlw 0xFF
MPASM  5.39                    DMC CONNOR.ASM   5-21-2016  2:34:32         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

015B   00FF           00568                 movwf LED_Upperval
015C   0008           00569                 RETURN
                      00570 
015D                  00571 LED_ON_MIN:
015D   3001           00572                 movlw 0x01
015E   00FF           00573                 movwf LED_Upperval
015F   30FF           00574                 movlw 0xFF
0160   00FE           00575                 movwf LED_Lowerval
0161   0008           00576                 RETURN
                      00577                 
                      00578 
0162                  00579 PWM: 
                      00580                 ; Turn Timer2 OFF
0162   1283 1703      00581                 banksel T2CON
0164   1112           00582                 bcf T2CON, TMR2ON ; Turn Timer2 OFF
0165   1283 1303      00583                 banksel PIR1
0167   108C           00584                 BCF             PIR1, TMR2IF
0168   187B           00585                 BTFSC   LED_ON, 0; Test the LED_On_Flag, skip if clear
0169   297A           00586                 GOTO    PWM_GO_LO; Go to LOW_TIME
016A   296B           00587                 GOTO    PWM_GO_HI; Go to HIGH_TIME
                      00588 
016B                  00589 PWM_GO_HI:      ; Go to the next look up table value
                      00590 
                      00591         ; ORIGINAL CODE
                      00592                 ;       movlw           0xFF
                      00593                 ;       movwf           testvar
                      00594                 ;        movf           index, W
                      00595                 ;        call           DIM_LED_ARRAY           ; Call the step table
                      00596                 ;       subwf           testvar, w
                      00597 
                      00598         ; NEW CODE
                      00599         ;       movlw 0x2D
                      00600         ;       movwf testvar
                      00601         ;       movf index, W
                      00602         ;       subwf testvar,W
                      00603 
                      00604         ; NEWER CODE
                      00605         ;movf index2, W
                      00606         ;       movf COUNTS_LEFT, W
016B   087F           00607                 movf LED_Upperval, W
                      00608 
                      00609         ;movf index, W
                      00610 
016C   1283 1703      00611                          banksel        PR2                             ; Select the bank with PR2
016E   0091           00612                          movwf          PR2                             ; Move 0xFF to PR2 so that the t
                            imer counts through 255 (not including pre or post scalers)
                      00613                 
016F   1283 1703      00614                         banksel LATA
0171   187A           00615                         btfsc COLOR,0                   ; Test the color flag, skip if set
0172   1505           00616                         BSF LATA, BLUE_LED                              ; Turn on blue LED
0173   1C7A           00617                         btfss COLOR,0                   ; Test the color flag, skip if clear
0174   1485           00618                         BSF LATA, RED_LED                               ; Turn on blue LED
0175   147B           00619                         BSF LED_ON,0                    ; Set the on flag
MPASM  5.39                    DMC CONNOR.ASM   5-21-2016  2:34:32         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00620 
                      00621                         ; Turn Timer2 ON
0176   1283 1703      00622                         banksel T2CON
0178   1512           00623                         bsf T2CON, TMR2ON ; Turn Timer2 ON
                      00624 
0179   2987           00625                         GOTO POP
                      00626 
                      00627 
017A                  00628 PWM_GO_LO:      ; Go to the next look up table value
                      00629         ; ORIGINAL CODE                  
                      00630                          ;movf          index, W
                      00631                         ; call          DIM_LED_ARRAY           ; Call the step table
                      00632         ; NEW CODE
                      00633         ;               movf            index, W
                      00634         ;movf COUNTS_LEFT, W
017A   087E           00635                         movf LED_Lowerval, W
                      00636 
017B   1283 1703      00637                          banksel        PR2                             ; Select the bank with PR2
017D   0091           00638                          movwf          PR2                             ; Move 0xFF to PR2 so that the t
                            imer counts through 255 (not including pre or post scalers)
                      00639 
017E   1283 1703      00640                         banksel LATA
0180   1105           00641                         BCF             LATA, BLUE_LED
0181   1085           00642                         BCF             LATA, RED_LED
0182   107B           00643                         BCF     LED_ON,0                ; Clear the on flag
                      00644                         ; Turn Timer2 ON
0183   1283 1703      00645                         banksel T2CON
0185   1512           00646                         bsf T2CON, TMR2ON ; Turn Timer2 ON
                      00647 
0186   2987           00648                 GOTO POP
                      00649                 
0187                  00650 POP: 
0187   0183           00651         clrf STATUS ;select bank 0
0188   0877           00652         movf PCLATH_TEMP,W ;store saved PCLATH value in WREG
0189   008A           00653         movwf PCLATH ;restore PCLATH
018A   0876           00654         movf STATUS_TEMP,W ;store saved STATUS value in WREG
018B   0083           00655         movwf STATUS ;restore STATUS
018C   0EF5           00656         swapf WREG_TEMP,F ;prepare WREG to be restored
018D   0E75           00657         swapf WREG_TEMP,W ;restore WREG keeping STATUS bits
018E   0009           00658         retfie ;return from interrupt
                      00659 
                      00660         END
MPASM  5.39                    DMC CONNOR.ASM   5-21-2016  2:34:32         PAGE 14


SYMBOL TABLE
  LABEL                             VALUE 

ADCON0                            0000001E
ADCON1                            0000001F
ADCS0                             00000004
ADCS1                             00000005
ADCS2                             00000006
ADFM                              00000007
ADGO                              00000001
ADIE                              00000006
ADIF                              00000006
ADON                              00000000
ADRES                             0000001C
ADRESH                            0000001D
ADRESL                            0000001C
ANSA0                             00000000
ANSA1                             00000001
ANSA2                             00000002
ANSA4                             00000004
ANSA5                             00000005
ANSELA                            00000185
APFCON                            00000188
BITS_IN_PACKET                    00000003
BITS_LEFT                         00000073
BKF0                              00000000
BKF1                              00000001
BKF2                              00000002
BKF3                              00000003
BKR0                              00000004
BKR1                              00000005
BKR2                              00000006
BKR3                              00000007
BLUE_LED                          00000002
C                                 00000000
C1CON0                            0000009D
C1CON1                            0000009E
C1HYS                             00000001
C1IE                              00000004
C1IF                              00000004
C1INTN                            00000006
C1INTP                            00000007
C1NCH                             00000000
C1OE                              00000005
C1ON                              00000007
C1OUT                             00000006
C1PCH0                            00000004
C1PCH1                            00000005
C1POL                             00000004
C1SP                              00000002
C1SYNC                            00000000
C2CON0                            0000009B
C2CON1                            0000009C
C2HYS                             00000001
C2IE                              00000005
C2IF                              00000005
MPASM  5.39                    DMC CONNOR.ASM   5-21-2016  2:34:32         PAGE 15


SYMBOL TABLE
  LABEL                             VALUE 

C2INTN                            00000006
C2INTP                            00000007
C2NCH                             00000000
C2OE                              00000005
C2ON                              00000007
C2OUT                             00000006
C2PCH0                            00000004
C2PCH1                            00000005
C2POL                             00000004
C2SP                              00000002
C2SYNC                            00000000
CCP1CON                           00000015
CCP1IE                            00000000
CCP1IF                            00000000
CCPM0                             00000000
CCPM1                             00000001
CCPM2                             00000002
CCPM3                             00000003
CCPR1                             00000013
CCPR1H                            00000014
CCPR1L                            00000013
CHS0                              00000002
CHS1                              00000003
CHS2                              00000004
CHS3                              00000005
CM1CON0                           0000009D
CM1CON1                           0000009E
CM2CON0                           0000009B
CM2CON1                           0000009C
CMOUT                             0000009F
COLOR                             0000007A
CONTINUE_LEDS                     0000013C
CONTINUE_RESET                    00000154
COUNTS_LEFT                       00000074
CWG1IF                            00000000
CWGAOD0                           00000004
CWGAOD1                           00000005
CWGARSE                           00000006
CWGAS0E                           00000000
CWGAS1E                           00000001
CWGAS2E                           00000002
CWGAS3E                           00000003
CWGASD                            00000198
CWGASDE                           00000007
CWGBKR                            00000193
CWGCON0                           00000195
CWGCON1                           00000196
CWGCON2                           00000197
CWGCS0                            00000001
CWGCS1                            00000002
CWGDBR                            00000194
CWGEN                             00000007
CWGFBK0                           00000003
MPASM  5.39                    DMC CONNOR.ASM   5-21-2016  2:34:32         PAGE 16


SYMBOL TABLE
  LABEL                             VALUE 

CWGFBK1                           00000004
CWGFBK2                           00000005
CWGFDB                            00000006
CWGFS0                            00000003
CWGFS1                            00000004
CWGFS2                            00000005
CWGFSEL                           00000002
CWGIE                             00000000
CWGLD                             00000007
CWGO0SEL                          00000000
CWGO1SEL                          00000001
CWGOE0                            00000006
CWGOE1                            00000005
CWGPH                             00000192
CWGPOL0                           00000004
CWGPOL1                           00000003
CWGRBK0                           00000000
CWGRBK1                           00000001
CWGRBK2                           00000002
CWGRDB                            00000007
CWGRS0                            00000000
CWGRS1                            00000001
CWGRS2                            00000002
DACCON0                           00000091
DACCON1                           00000092
DACEN                             00000007
DACOE                             00000005
DACPSS0                           00000002
DACR0                             00000000
DACR1                             00000001
DACR2                             00000002
DACR3                             00000003
DACR4                             00000004
DACRNG                            00000006
DBF0                              00000000
DBF1                              00000001
DBF2                              00000002
DBF3                              00000003
DBR0                              00000004
DBR1                              00000005
DBR2                              00000006
DBR3                              00000007
DC                                00000001
DCB0                              00000004
DCB1                              00000005
DIM_LEDS                          00000138
DIM_LED_ARRAY                     00000005
F                                 00000001
FSR                               00000004
FVRBUFEN                          00000005
FVRBUFSS                          00000004
FVRCON                            00000090
FVREN                             00000007
MPASM  5.39                    DMC CONNOR.ASM   5-21-2016  2:34:32         PAGE 17


SYMBOL TABLE
  LABEL                             VALUE 

FVRRDY                            00000006
GIE                               00000007
GO                                00000001
GO_DONE                           00000001
GO_NOT_DONE                       00000001
GPIE                              00000003
HLTCKPS0                          00000000
HLTCKPS1                          00000001
HLTCON0                           00000115
HLTCON1                           00000116
HLTERS0                           00000002
HLTERS1                           00000003
HLTERS2                           00000004
HLTFEREN                          00000001
HLTIE                             00000002
HLTIF                             00000002
HLTON                             00000002
HLTOUTPS0                         00000003
HLTOUTPS1                         00000004
HLTOUTPS2                         00000005
HLTOUTPS3                         00000006
HLTPR                             00000114
HLTREREN                          00000000
HLTTMR                            00000113
HTS                               00000002
INDF                              00000000
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IOCAF                             00000008
IOCAF0                            00000000
IOCAF1                            00000001
IOCAF2                            00000002
IOCAF3                            00000003
IOCAF4                            00000004
IOCAF5                            00000005
IOCAN                             00000108
IOCAN0                            00000000
IOCAN1                            00000001
IOCAN3                            00000002
IOCAN4                            00000003
IOCAN5                            00000004
IOCAP                             00000088
IOCAP0                            00000000
IOCAP1                            00000001
IOCAP2                            00000002
IOCAP3                            00000003
IOCAP4                            00000004
IOCAP5                            00000005
IRCF0                             00000004
IRCF1                             00000005
IRP                               00000007
MPASM  5.39                    DMC CONNOR.ASM   5-21-2016  2:34:32         PAGE 18


SYMBOL TABLE
  LABEL                             VALUE 

ISR                               00000075
ISR_BODY                          0000007C
IS_PAIRED                         00000079
LAST_BIT_READ                     000000C7
LATA                              00000105
LATA0                             00000000
LATA1                             00000001
LATA2                             00000002
LATA4                             00000004
LATA5                             00000005
LED_Counter                       0000007D
LED_Lowerval                      0000007E
LED_ON                            0000007B
LED_ON_MAX                        00000158
LED_ON_MIN                        0000015D
LED_STATE                         00000072
LED_Timeval                       0000007C
LED_Upperval                      0000007F
LINE_IN                           00000000
LTS                               00000001
MAX_COUNTS                        0000005A
MCOUT                             0000009F
MCOUT1                            00000000
MCOUT2                            00000001
MOTOR_STATE                       00000071
Main                              00000033
NOT_BOR                           00000000
NOT_DONE                          00000001
NOT_GPPU                          00000007
NOT_PD                            00000003
NOT_POR                           00000001
NOT_T1SYNC                        00000002
NOT_TO                            00000004
OFF                               00000000
ON                                00000001
OPTION_REG                        00000081
OSCCON                            0000008F
OSCTUNE                           00000189
PACKET                            00000070
PACKET_COPY                       00000078
PCL                               00000002
PCLATH                            0000000A
PCLATH_TEMP                       00000077
PCON                              0000010F
PEIE                              00000006
PH0                               00000000
PH1                               00000001
PH2                               00000002
PH3                               00000003
PIE1                              0000008C
PIE2                              0000008D
PIE3                              0000008E
PIR1                              0000000C
MPASM  5.39                    DMC CONNOR.ASM   5-21-2016  2:34:32         PAGE 19


SYMBOL TABLE
  LABEL                             VALUE 

PIR2                              0000000D
PIR3                              0000000E
PMADR                             0000018E
PMADRH                            0000018F
PMADRL                            0000018E
PMCON1                            0000018C
PMCON2                            0000018D
PMDAT                             00000190
PMDATH                            00000191
PMDATL                            00000190
POP                               00000187
PORTA                             00000005
PR2                               00000111
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
PUSH                              00000075
PWM                               00000162
PWM_GO_HI                         0000016B
PWM_GO_LO                         0000017A
RA0                               00000000
RA1                               00000001
RA2                               00000002
RA3                               00000003
RA4                               00000004
RA5                               00000005
RAIF                              00000000
RD                                00000000
RECEIVE                           000000AF
RECEIVING                         00000001
RED_LED                           00000001
RESET_TIME                        00000150
START_BIT                         0000008F
START_MOVING                      000000E5
STATUS                            00000003
STATUS_TEMP                       00000076
STEP                              00000001
STEPPER_DIR                       00000004
STEPPER_EN                        00000005
STOP_MOVING                       00000110
T0CS                              00000005
T0SE                              00000004
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000011
T1GCON                            00000012
T1GGO                             00000003
T1GGO_NOT_DONE                    00000003
T1GPOL                            00000006
T1GSEL                            00000004
T1GSPM                            00000004
T1GSS0                            00000000
MPASM  5.39                    DMC CONNOR.ASM   5-21-2016  2:34:32         PAGE 20


SYMBOL TABLE
  LABEL                             VALUE 

T1GSS1                            00000001
T1GTM                             00000005
T1GVAL                            00000002
T1OSCEN                           00000003
T1_ENABLE_INTERRUPT               000000FC
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             00000112
T2OUTPS0                          00000003
T2OUTPS1                          00000004
T2OUTPS2                          00000005
T2OUTPS3                          00000006
TIMER1_CHECK                      0000008A
TIMER1_INTERRUPTSOURCE            00000109
TIMER2_CHECK                      0000007C
TMR0                              00000001
TMR0IE                            00000005
TMR0IF                            00000002
TMR1CS0                           00000006
TMR1CS1                           00000007
TMR1GE                            00000007
TMR1GIE                           00000007
TMR1GIF                           00000007
TMR1H                             00000010
TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             0000000F
TMR1ON                            00000000
TMR2                              00000110
TMR2IE                            00000001
TMR2IF                            00000001
TMR2ON                            00000002
TRISA                             00000085
TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
TRISA3                            00000003
TRISA4                            00000004
TRISA5                            00000005
TUN0                              00000000
TUN1                              00000001
TUN2                              00000002
TUN3                              00000003
TUN4                              00000004
TURN_LEDS_OFF                     0000013E
TURN_LEDS_ON                      0000011C
VCFG                              00000006
W                                 00000000
WAITING                           00000000
WPUA                              0000010C
WPUA0                             00000000
WPUA1                             00000001
WPUA2                             00000002
MPASM  5.39                    DMC CONNOR.ASM   5-21-2016  2:34:32         PAGE 21


SYMBOL TABLE
  LABEL                             VALUE 

WPUA3                             00000003
WPUA5                             00000005
WR                                00000001
WREG_TEMP                         00000075
WREN                              00000002
WUA4                              00000004
Z                                 00000002
_BOREN_DIS                        00003CFF
_BOREN_EN                         00003FFF
_BOREN_SLEEP_DIS                  00003EFF
_CKLOUTEN_OFF                     00003FFF
_CKLOUTEN_ON                      00002FFF
_CONFIG                           00002007
_CP_OFF                           00003FFF
_CP_ON                            00003FBF
_DEVID1                           00002006
_FOSC_EC                          00003FFF
_FOSC_INT                         00003FFE
_IDLOC0                           00002000
_IDLOC1                           00002001
_IDLOC2                           00002002
_IDLOC3                           00002003
_MCLRE_OFF                        00003FDF
_MCLRE_ON                         00003FFF
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FEF
_WDT_OFF                          00003FF7
_WDT_ON                           00003FFF
_WRT_ALL                          000033FF
_WRT_FOURTH                       00003BFF
_WRT_HALF                         000037FF
_WRT_OFF                          00003FFF
__12F752                          00000001


MEMORY USAGE MAP ('X' = Used,  '-' = Unused)

0000 : X---XXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0040 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0080 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
00C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0100 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0140 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0180 : XXXXXXXXXXXXXXX- ---------------- ---------------- ----------------
2000 : -------X-------- ---------------- ---------------- ----------------

All other memory blocks unused.

Program Memory Words Used:   396
Program Memory Words Free:   628

MPASM  5.39                    DMC CONNOR.ASM   5-21-2016  2:34:32         PAGE 22






Errors   :     0
Warnings :     0 reported,     0 suppressed
Messages :     0 reported,    66 suppressed

